<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Project Inquiry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 0 2px #3b82f6; /* blue-500 */
            border-color: #3b82f6;
        }
        .input-error {
            border-color: #ef4444; /* red-500 */
            box-shadow: 0 0 0 2px #ef4444;
        }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">
    <div class="w-full max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-8 md:p-12">

        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">New Project Inquiry</h1>
            <p class="text-gray-500 mt-2">Let's get a few details about your project to get started.</p>
        </div>

        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="relative pt-1">
                <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200">
                    <div id="progress-bar" style="width: 20%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 transition-all duration-500"></div>
                </div>
            </div>
        </div>

        <!-- Form Container -->
        <form id="questionnaire-form" action="https://formcarry.com/s/zCtl8e5VIin" method="POST" accept-charset="UTF-8">
            
            <!-- SECTION 1: Contact Info -->
            <div id="section-1" class="form-section active">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">Step 1: Contact Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="full_name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                        <input type="text" id="full_name" name="full_name" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="e.g., Alex" required>
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                        <input type="email" id="email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="you@example.com" required>
                    </div>
                    <div>
                        <label for="business_name" class="block text-sm font-medium text-gray-700 mb-1">Name of Business</label>
                        <input type="text" id="business_name" name="business_name" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="e.g., Alex's Business" required>
                    </div>
                     <div>
                        <label for="phone_number" class="block text-sm font-medium text-gray-700 mb-1">Business Phone</label>
                        <input type="tel" id="phone_number" name="phone_number" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="(555) 123-4567" required>
                    </div>
                     <div class="md:col-span-2">
                        <label for="website_url" class="block text-sm font-medium text-gray-700 mb-1">Current Website URL (Optional)</label>
                        <input type="url" id="website_url" name="website_url" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="https://example.com">
                    </div>
                     <div class="md:col-span-2">
                        <label for="best_time_to_reach" class="block text-sm font-medium text-gray-700 mb-1">Best time to reach you? (Optional)</label>
                        <input type="text" id="best_time_to_reach" name="best_time_to_reach" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="e.g., Weekdays after 3 PM">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Would you like to schedule an in-person appointment? (Optional)</label>
                        <div class="flex items-center space-x-4">
                            <label class="flex items-center"><input type="radio" name="in_person_appointment" value="Yes" class="mr-2"> Yes</label>
                            <label class="flex items-center"><input type="radio" name="in_person_appointment" value="No" class="mr-2"> No</label>
                        </div>
                    </div>
                     <div class="md:col-span-2">
                        <label for="how_did_you_hear" class="block text-sm font-medium text-gray-700 mb-1">How did you hear about us? (Optional)</label>
                        <select id="how_did_you_hear" name="how_did_you_hear" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition bg-white">
                            <option value="">Select an option</option>
                            <option>Google</option>
                            <option>Social Media</option>
                            <option>Referral</option>
                            <option>Other</option>
                        </select>
                    </div>
                </div>
                <div id="error-1" class="text-red-500 text-sm mt-4 hidden"></div>
            </div>

            <!-- SECTION 2: Services Needed -->
            <div id="section-2" class="form-section">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">Step 2: Services Needed</h2>
                <div class="space-y-6">
                    <label class="block text-sm font-medium text-gray-700 -mb-2">Which services are you interested in? (Select at least one)</label>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-x-6 gap-y-6" data-required-group="services[]">
                        
                        <div class="space-y-3 p-4 border rounded-lg">
                            <h3 class="font-semibold text-gray-600">AI & Automation Systems</h3>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="AI-Powered Content Strategy" class="mr-3 rounded"> AI-Powered Content Strategy</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Custom Automation Funnels" class="mr-3 rounded"> Custom Automation Funnels</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="AI Prompt Engineering & Training" class="mr-3 rounded"> AI Prompt Engineering & Training</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="NotebookLM Integration" class="mr-3 rounded"> NotebookLM Integration</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="AI Coding" class="mr-3 rounded"> AI Coding</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Custom Business Automations" class="mr-3 rounded"> Custom Business Automations</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Automated Client Forms" class="mr-3 rounded"> Automated Client Forms</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Custom Prompt Library Development" class="mr-3 rounded"> Custom Prompt Library Development</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Curated AI Tool Stacks" class="mr-3 rounded"> Curated AI Tool Stacks</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="AI Strategy Consulting" class="mr-3 rounded"> AI Strategy Consulting</label>
                        </div>

                        <div class="space-y-3 p-4 border rounded-lg">
                            <h3 class="font-semibold text-gray-600">Interactive QR & Web</h3>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Standard Website Build" class="mr-3 rounded"> Standard Website Build</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="E-commerce Website Build" class="mr-3 rounded"> E-commerce Website Build</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Custom Branded QR Codes" class="mr-3 rounded"> Custom Branded QR Codes</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Interactive Micro-websites" class="mr-3 rounded"> Interactive Micro-websites</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Digital Business Cards" class="mr-3 rounded"> Digital Business Cards</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Shopify & E-commerce Integration" class="mr-3 rounded"> Shopify & E-commerce Integration</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Multipurpose QR Code Generator Subscription" class="mr-3 rounded"> Multipurpose QR Code Generator Subscription</label>
                        </div>

                        <div class="space-y-3 p-4 border rounded-lg">
                            <h3 class="font-semibold text-gray-600">Social & E-commerce</h3>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Business Social Media Accounts Set up" class="mr-3 rounded"> Business Social Media Accounts Set up</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Social Media Strategy & Growth" class="mr-3 rounded"> Social Media Strategy & Growth</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="E-commerce Store Management" class="mr-3 rounded"> E-commerce Store Management</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Google Business Profile Opt." class="mr-3 rounded"> Google Business Profile Opt.</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="Community Building & Mgmt" class="mr-3 rounded"> Community Building & Mgmt</label>
                            <label class="flex items-center"><input type="checkbox" name="services[]" value="VEO3 Creation" class="mr-3 rounded"> VEO3 Creation</label>
                        </div>

                    </div>
                </div>
                <div id="error-2" class="text-red-500 text-sm mt-4 hidden"></div>
            </div>

            <!-- SECTION 3: Project Details -->
            <div id="section-3" class="form-section">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">Step 3: Project Details</h2>
                <div class="space-y-6">
                     <div>
                        <label for="primary_goal" class="block text-sm font-medium text-gray-700 mb-1">What is the primary goal for this project?</label>
                        <textarea id="primary_goal" name="primary_goal" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="e.g., Increase online sales, generate more leads..." required></textarea>
                    </div>
                     <div>
                        <label for="target_audience" class="block text-sm font-medium text-gray-700 mb-1">Who is your target audience?</label>
                        <textarea id="target_audience" name="target_audience" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="Describe your ideal customer (age, interests, location...)" required></textarea>
                    </div>
                     <div>
                        <label for="competitors" class="block text-sm font-medium text-gray-700 mb-1">Please list any competitors. (Optional)</label>
                        <textarea id="competitors" name="competitors" rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="e.g., competitor-a.com, competitor-b.com..."></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Do you currently have social media accounts?</label>
                        <div class="flex items-center space-x-4" data-required-group="has_social_media">
                            <label class="flex items-center"><input type="radio" name="has_social_media" value="Yes" class="mr-2"> Yes</label>
                            <label class="flex items-center"><input type="radio" name="has_social_media" value="No" class="mr-2"> No</label>
                        </div>
                    </div>
                     <div id="existing_social_media_wrapper" class="hidden">
                        <label for="existing_social_media" class="block text-sm font-medium text-gray-700 mb-1">Please list the URLs or handles.</label>
                        <textarea id="existing_social_media" name="existing_social_media" rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="e.g., instagram.com/yourbusiness"></textarea>
                    </div>
                </div>
                <div id="error-3" class="text-red-500 text-sm mt-4 hidden"></div>
            </div>
            
            <!-- SECTION 4: Budget & Timeline -->
            <div id="section-4" class="form-section">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">Step 4: Budget & Timeline</h2>
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">What is your estimated budget?</label>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4" data-required-group="budget">
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-100 cursor-pointer"><input type="radio" name="budget" value="$500 - $1,500" class="mr-3"> $500 - $1,500</label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-100 cursor-pointer"><input type="radio" name="budget" value="$1,500 - $3,000" class="mr-3"> $1,500 - $3,000</label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-100 cursor-pointer"><input type="radio" name="budget" value="$3,000 - $5,000" class="mr-3"> $3,000 - $5,000</label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-100 cursor-pointer"><input type="radio" name="budget" value="$5,000+" class="mr-3"> $5,000+</label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-100 cursor-pointer sm:col-span-2"><input type="radio" name="budget" value="Not sure / Need a quote" class="mr-3"> I'm not sure / I need a quote</label>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        <div>
                            <label for="start_date" class="block text-sm font-medium text-gray-700 mb-1">Desired Start Date (Optional)</label>
                            <input type="date" id="start_date" name="start_date" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition">
                        </div>
                        <div>
                            <label for="deadline" class="block text-sm font-medium text-gray-700 mb-1">Desired Deadline (Optional)</label>
                            <input type="date" id="deadline" name="deadline" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition">
                        </div>
                    </div>
                     <div>
                        <label for="final_comments" class="block text-sm font-medium text-gray-700 mb-1">Anything else we should know?</label>
                        <textarea id="final_comments" name="final_comments" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition" placeholder="e.g., specific features, brand voice..." required></textarea>
                    </div>
                </div>
                <div id="error-4" class="text-red-500 text-sm mt-4 hidden"></div>
            </div>

            <!-- SECTION 5: Review -->
            <div id="section-5" class="form-section">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">Step 5: Review Your Inquiry</h2>
                <p class="text-gray-600 mb-6">Please review your answers below. If everything looks correct, please submit your inquiry.</p>
                <div id="review-content" class="space-y-4 text-sm">
                    <!-- Summary will be dynamically inserted here by JavaScript -->
                </div>
            </div>
            
            <!-- Thank You Message -->
            <div id="thank-you" class="form-section text-center py-10">
                <svg class="w-16 h-16 text-green-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <h2 class="text-3xl font-bold text-gray-800">Thank You!</h2>
                <p class="text-gray-600 mt-2">Your inquiry has been received. We'll be in touch within 1-2 business days.</p>
                <p class="text-gray-500 text-sm mt-4">If you need to reach out sooner, please email us at <a href="mailto:services@scanistaqr.com" class="text-blue-500 hover:underline">services@scanistaqr.com</a>.</p>
            </div>

            <!-- Privacy Notice -->
            <div id="privacy-notice" class="mt-8 text-center text-xs text-gray-500 hidden">
                <p>We respect your privacy. The information you provide will be used solely to respond to your inquiry.</p>
            </div>

            <!-- Navigation Buttons -->
            <div class="mt-10 flex justify-between items-center">
                <button type="button" id="back-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-6 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>Back</button>
                <button type="button" id="next-btn" class="bg-blue-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-600 transition-colors">Next</button>
                <button type="submit" id="submit-btn" class="bg-green-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-600 transition-colors hidden">Submit Inquiry</button>
            </div>
        </form>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('questionnaire-form');
            const sections = document.querySelectorAll('.form-section');
            const nextBtn = document.getElementById('next-btn');
            const backBtn = document.getElementById('back-btn');
            const submitBtn = document.getElementById('submit-btn');
            const progressBar = document.getElementById('progress-bar');
            const socialMediaRadios = document.querySelectorAll('input[name="has_social_media"]');
            const existingSocialWrapper = document.getElementById('existing_social_media_wrapper');

            let currentSection = 1;
            const totalRealSections = 5; // Total steps including review

            // --- Conditional Logic for Social Media ---
            socialMediaRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Yes') {
                        existingSocialWrapper.classList.remove('hidden');
                    } else {
                        existingSocialWrapper.classList.add('hidden');
                    }
                });
            });

            function getLabelText(key) {
                const labels = {
                    'full_name': 'Full Name', 'email': 'Email Address', 'business_name': 'Business Name',
                    'phone_number': 'Business Phone', 'website_url': 'Current Website', 'how_did_you_hear': 'Heard From',
                    'services[]': 'Services Needed', 'primary_goal': 'Primary Goal', 'target_audience': 'Target Audience',
                    'competitors': 'Competitors', 'has_social_media': 'Has Social Media?', 'existing_social_media': 'Existing Social Media',
                    'budget': 'Estimated Budget', 'start_date': 'Desired Start Date', 'deadline': 'Desired Deadline', 'final_comments': 'Additional Comments',
                    'best_time_to_reach': 'Best Time to Reach', 'in_person_appointment': 'Schedule In-Person Appointment?'
                };
                return labels[key] || key;
            }

            function populateReviewSection() {
                const reviewContent = document.getElementById('review-content');
                reviewContent.innerHTML = '';
                const formData = new FormData(form);
                const summary = {};

                for (const [key, value] of formData.entries()) {
                    if (!value) continue;
                    if (key.endsWith('[]')) {
                        const cleanKey = key;
                        if (!summary[cleanKey]) summary[cleanKey] = [];
                        summary[cleanKey].push(value);
                    } else {
                        summary[key] = value;
                    }
                }

                for (const key in summary) {
                    const value = Array.isArray(summary[key]) ? summary[key].join(', ') : summary[key];
                    const labelText = getLabelText(key);
                    const reviewItem = document.createElement('div');
                    reviewItem.className = 'p-3 bg-gray-50 rounded-lg';
                    reviewItem.innerHTML = `<strong class="font-medium text-gray-800 block">${labelText}</strong><p class="text-gray-600">${value}</p>`;
                    reviewContent.appendChild(reviewItem);
                }
            }

            function showError(sectionIndex, message) {
                const errorDiv = document.getElementById(`error-${sectionIndex}`);
                if (errorDiv) {
                    errorDiv.textContent = message;
                    errorDiv.classList.remove('hidden');
                }
            }

            function clearError(sectionIndex) {
                const errorDiv = document.getElementById(`error-${sectionIndex}`);
                if (errorDiv) {
                    errorDiv.textContent = '';
                    errorDiv.classList.add('hidden');
                }
            }
            
            function validateSection(sectionIndex) {
                clearError(sectionIndex);
                const section = document.getElementById(`section-${sectionIndex}`);
                let isValid = true;

                const requiredFields = section.querySelectorAll('input[required], textarea[required]');
                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        isValid = false;
                        field.classList.add('input-error');
                    } else {
                        field.classList.remove('input-error');
                    }
                });

                const requiredGroups = section.querySelectorAll('[data-required-group]');
                requiredGroups.forEach(group => {
                    const groupName = group.dataset.requiredGroup;
                    const checked = section.querySelector(`input[name="${groupName}"]:checked`);
                    if (!checked) isValid = false;
                });

                if (!isValid) {
                    showError(sectionIndex, 'Please fill out all required fields.');
                    return false;
                }

                if (sectionIndex === 3) {
                    const hasSocialMedia = section.querySelector('input[name="has_social_media"]:checked');
                    const existingSocialMedia = section.querySelector('#existing_social_media');
                    if (hasSocialMedia && hasSocialMedia.value === 'Yes' && !existingSocialMedia.value.trim()) {
                        isValid = false;
                        existingSocialMedia.classList.add('input-error');
                        showError(sectionIndex, 'Please provide your existing social media handles.');
                    } else {
                        existingSocialMedia.classList.remove('input-error');
                    }
                }

                return isValid;
            }

            function updateUI() {
                const progress = (currentSection / totalRealSections) * 100;
                progressBar.style.width = `${progress}%`;

                sections.forEach((section) => section.classList.remove('active'));
                document.getElementById(`section-${currentSection}`).classList.add('active');

                backBtn.disabled = currentSection === 1;
                const isReviewSection = currentSection === totalRealSections;
                nextBtn.classList.toggle('hidden', isReviewSection);
                submitBtn.classList.toggle('hidden', !isReviewSection);
                document.getElementById('privacy-notice').classList.toggle('hidden', !isReviewSection);
            }

            nextBtn.addEventListener('click', () => {
                if (validateSection(currentSection) && currentSection < totalRealSections) {
                    currentSection++;
                    if (currentSection === totalRealSections) {
                        populateReviewSection();
                    }
                    updateUI();
                }
            });

            backBtn.addEventListener('click', () => {
                if (currentSection > 1) {
                    currentSection--;
                    updateUI();
                }
            });
            
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                if (!validateSection(currentSection)) return;
                
                const formData = new FormData(form);
                fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                }).then(response => {
                    if (response.ok) {
                        sections.forEach(s => s.style.display = 'none');
                        document.querySelector('.relative.pt-1').style.display = 'none';
                        document.querySelector('.mt-10').style.display = 'none';
                        document.getElementById('privacy-notice').style.display = 'none';
                        document.getElementById('thank-you').classList.add('active');
                    } else {
                        response.json().then(data => {
                            const errorMessage = data.errors ? data.errors.map(e => e.message).join(', ') : 'An unknown error occurred.';
                            alert(`Oops! There was a problem: ${errorMessage}`);
                        });
                    }
                }).catch(error => {
                    alert('Oops! There was a network error submitting your form.');
                });
            });

            // Initial UI setup
            updateUI();
        });
    </script>
</body>
</html>
